#
# <meta:header>
#   <meta:licence>
#     Copyright (c) 2026, Manchester (http://www.manchester.ac.uk/)
#
#     This information is free software: you can redistribute it and/or modify
#     it under the terms of the GNU General Public License as published by
#     the Free Software Foundation, either version 3 of the License, or
#     (at your option) any later version.
#
#     This information is distributed in the hope that it will be useful,
#     but WITHOUT ANY WARRANTY; without even the implied warranty of
#     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#     GNU General Public License for more details.
#
#     You should have received a copy of the GNU General Public License
#     along with this software. If not, see <http://www.gnu.org/licenses/>.
#   </meta:licence>
# </meta:header>
#
#zrq-notes-indent
#
# AIMetrics: []
#

    Target:

        Partially revert an earlier change.

        Refactor validate() to return status enum #349
        https://github.com/ivoa/Calycopis-broker/issues/349

        Refactor validate() to return void #340
        https://github.com/ivoa/Calycopis-broker/issues/340

    Result:

        Work in progress ...

# -----------------------------------------------------
# -----------------------------------------------------
# Create a new branch.
#[user@desktop]

    branchname=restore-enum
    newbranch=$(date '+%Y%m%d')-zrq-${branchname:?}

    source "${HOME:?}/calycopis.env"
    pushd "${CALYCOPIS_CODE:?}"

        git checkout main

        git checkout -b "${newbranch:?}"

    popd

# -----------------------------------------------------
# Create a Podman Pod and start our database server.
#[user@desktop]

    #
    # Create a new Pod
    podman pod create \
        --replace \
        --name calycopis-pod

    #
    # Run our database server.
    podman run \
        --rm \
        --detach \
        --replace \
        --name postgresql \
        --pod calycopis-pod \
        --expose 5432 \
        --env "POSTGRES_DB=calycopis" \
        --env "POSTGRES_USER=albert" \
        --env "POSTGRES_PASSWORD=UVai0wie-wa9Eed4g" \
        docker.io/library/postgres:latest

# -----------------------------------------------------
# Run an instance of our developer tools.
# Note the name change to calycopis-dev
# Note the added volume mount for ~/.cursor to load our Cursor configuration.
#[user@desktop]

    source "${HOME:?}/calycopis.env"
    podman run \
        --rm \
        --tty \
        --interactive \
        --expose 8082 \
        --pod  calycopis-pod \
        --name calycopis-dev \
        --volume "${TREBULA_CODE}:/trebula:rw,z" \
        --volume "${CALYCOPIS_CODE}:/calycopis:rw,z" \
        --volume "${HOME}/.m2:/root/.m2:rw,z" \
        --volume "${HOME}/.cursor:/root/.cursor:rw,z" \
        ghcr.io/ivoa/calycopis/developer-tools:2025.08.12 \
        bash

    >   ....
    >   ....


# -----------------------------------------------------
# Build and run the service.
#[root@calycopis-dev]

    pushd /calycopis/java

        ./mvnw clean spring-boot:run

    popd

    >   ....
    >   ....


# -----------------------------------------------------
# Run our Python tests in a separate terminal ...
#[user@desktop]

    podman exec \
        --tty \
        --interactive \
        calycopis-dev \
            bash

    pip install pytest

    pip install  --editable /trebula/codegen/python/client/build/

    pushd /calycopis/tests/python
        pytest test_mock_validators.py -v
    popd

    >   ....
    >   ....
    >   ============================== 38 passed in 4.10s ==============================


# -----------------------------------------------------
# Continuing Cursor session from previous notes.
#[user@desktop]

    podman exec \
        --tty \
        --interactive \
        calycopis-dev \
            bash

        curl https://cursor.com/install -fsS | bash

        agent


# -----------------------------------------------------
# Assign the new task
#[cursor]

    Looking at the Java code base at /calycopis/java/.
    A previous task involved refactoring the validate() method on the Validator interface to return void instead of a Validator.Result<>
    https://github.com/ivoa/Calycopis-broker/pull/345/changes#diff-3effe130c63bafa6472d536d6a4d5aaecc5bd3d63cd71309db6953140c17f0eeL62-L65

    This meant we had to introduce a new `dispatched` flag to indicate whether the validator had succesfully handled the request.
    https://github.com/ivoa/Calycopis-broker/pull/345/changes#diff-bc2b9495e16496e1630f97ec452465e5dacc35df0ab87984907f5c13c65a0043R63-R76

    We replaced the switch statement on the result.getEnum() with a call to check the dispatched flag.
    https://github.com/ivoa/Calycopis-broker/pull/345/changes#diff-3effe130c63bafa6472d536d6a4d5aaecc5bd3d63cd71309db6953140c17f0eeL74-L82

    The calls to get and set the dispatched flag are fragile and not easy to understand what is happening.
    Can you refactor the the validate() method to return just the Validator.ResultEnum without the Validator.Result<> and then restore the original switch statement to control when we exit the validation loop.

    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 1.8s                                                                                                                                                                       │
    >     │ The user wants me to refactor the validate() method on the Validator interface to return Validator.ResultEnum instead of void, and then restore the original switch statement            │
    >     │ pattern that was used before PR #345. Let me start by understanding the current codebase and the PR changes.                                                                             │
    >     │                                                                                                                                                                                          │
    >     │ Let me first look at the PR to understand what changed, and then look at the current code.                                                                                               │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Let me start by understanding the current code and the PR changes.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 3.2s                                                                                                                                                                       │
    >     │ Now let me understand the current state. The validate() method in Validator interface currently returns void, and the ValidatorFactoryImpl uses a dispatched flag on the                 │
    >     │ context to determine if a validator handled the request. The user wants to:                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     │ 1. Change validate() to return Validator.ResultEnum instead of void                                                                                                                      │
    >     │ 2. Restore the original switch statement in ValidatorFactoryImpl to control when we exit the validation loop                                                                             │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │ Let me look at how validate() is implemented across the codebase and how the dispatched flag is used.                                                                                    │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Globbed 2 globs
    >       Globbed "**/Validator.java" in calycopis/java
    >       Globbed "**/*Validator*.java" in calycopis/java
    >   
    >     ⬢ WebFetch https://github.com/ivoa/Calycopis-broker/pull/345/files
    >   
    >     ⬢ Read 5 files
    >       … 2 earlier items hidden
    >       Read .../functional/validator/ValidatorFactoryImpl.java
    >       Read ...lycopis/functional/validator/ValidatorBase.java
    >       Read ...functional/validator/AbstractValidatorImpl.java
    >   
    >     Now let me look at the dispatched flag in the context and the actual validator implementations to understand the full scope.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 1.2s                                                                                                                                                                       │
    >     │ Now let me also check the OfferSetRequestParserContextImpl for the dispatched flag implementation, and also look at the MockPlatformImpl to see how the dispatched flag is used          │
    >     │ there.                                                                                                                                                                                   │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Grepped, read 2 greps, 10 files
    >       … 9 earlier items hidden
    >       Read ...el/data/skao/SkaoDataResourceValidatorImpl.java
    >       Read ...a/amazon/AmazonS3DataResourceValidatorImpl.java
    >       Read ...lume/simple/SimpleVolumeMountValidatorImpl.java
    >   
    >     Now let me also look at the context implementation and check the PR diff directly for the specific lines referenced.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 30s                                                                                                                                                                        │
    >     │ ... (36 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ Now I have a clear picture of what needs to be done. Let me also check the MockPlatformImpl to understand where dispatched is used there.                                                │
    >     │                                                                                                                                                                                          │
    >     │ The current state is:                                                                                                                                                                    │
    >     │ 1. Validator.validate() returns void                                                                                                                                                     │
    >     │ 2. Each validator sets context.dispatched(true) to signal it handled the request                                                                                                         │
    >     │ 3. ValidatorFactoryImpl.validate() checks context.dispatched() after each validator call                                                                                                 │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Read 2 files
    >       Read .../offerset/OfferSetRequestParserContextImpl.java
    >       Read ...me/AbstractVolumeMountValidatorFactoryImpl.java
    >   
    >     Let me check MockPlatformImpl for its usage of dispatched.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 744ms                                                                                                                                                                      │
    >     │ Now I need to also look at the Abstract validator interfaces that re-declare validate() to make sure I update those too.                                                                 │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Read 3 files
    >       Read ...s/functional/platfom/mock/MockPlatformImpl.java
    >       Read ...amodel/volume/AbstractVolumeMountValidator.java
    >       Read ...ble/AbstractExecutableValidatorFactoryImpl.java
    >   
    >     Let me also check the abstract validator interfaces that re-declare validate().
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 32s                                                                                                                                                                        │
    >     │ ... (23 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ Now I have a complete picture. Let me create a comprehensive plan and execute it.                                                                                                        │
    >     │                                                                                                                                                                                          │
    >     │ The changes needed are:                                                                                                                                                                  │
    >     │                                                                                                                                                                                          │
    >     │ 1. `Validator.java` - Change validate() from void to ResultEnum                                                                                                                          │
    >     │ 2. `ValidatorFactoryImpl.java` - Change validate() to return ResultEnum, replace dispatched check with switch                                                                            │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Read 4 files
    >       Read ...del/executable/AbstractExecutableValidator.java
    >       Read ...tamodel/data/AbstractDataResourceValidator.java
    >       Read ...l/compute/AbstractComputeResourceValidator.java
    >       Read ...l/storage/AbstractStorageResourceValidator.java
    >   
    >     Now I have a complete understanding of the codebase. Let me create a task list and start implementing the changes.
    >   
    >     ⬢ To-do Working on 15 to-dos
    >       ☐ Change Validator.validate() to return ResultEnum instead of void
    >       ☐ Update abstract validator interfaces (5 files) that re-declare validate()
    >       ☐ Update ValidatorFactoryImpl to return ResultEnum and use switch statement
    >       ☐ Update DockerContainerValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update JupyterNotebookValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleComputeResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleStorageResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update IvoaDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SkaoDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update AmazonS3DataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleVolumeMountValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Remove dispatched() from OfferSetRequestParserContext and its impl
    >       ☐ Update dispatched comment in MockPlatformImpl
    >       ☐ Compile and verify
    >   
    >     Starting with the core Validator interface, changing validate() to return ResultEnum.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/calycopis/functional/validator/Validator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final ObjectType requested,                                                                                                                                                    │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating the 5 abstract validator interfaces that re-declare validate().
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...del/executable/AbstractExecutableValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractExecutable requested,                                                                                                                                        │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...tamodel/data/AbstractDataResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractDataResource requested,                                                                                                                                      │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/compute/AbstractComputeResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractComputeResource requested,                                                                                                                                   │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/storage/AbstractStorageResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractStorageResource requested,                                                                                                                                   │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...amodel/volume/AbstractVolumeMountValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractVolumeMount requested,                                                                                                                                       │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ To-do Working on 13 to-dos • 2 done
    >       ☒ Change Validator.validate() to return ResultEnum instead of void
    >       ☒ Update abstract validator interfaces (5 files) that re-declare validate()
    >       ☐ Update ValidatorFactoryImpl to return ResultEnum and use switch statement
    >       ☐ Update DockerContainerValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update JupyterNotebookValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleComputeResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleStorageResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update IvoaDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SkaoDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update AmazonS3DataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Update SimpleVolumeMountValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☐ Remove dispatched() from OfferSetRequestParserContext and its impl
    >       ☐ Update dispatched comment in MockPlatformImpl
    >       ☐ Compile and verify
    >   
    >     Now updating ValidatorFactoryImpl to return ResultEnum and restore the switch statement.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../functional/validator/ValidatorFactoryImpl.java +14 -9                                                                                                                                │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final ObjectType requested,                                                                                                                                                    │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           //                                                                                                                                                                             │
    >     │           // Try each of the validators in our list.                                                                                                                                     │
    >     │ -         // Validators are tried in registration order and the first one to set                                                                                                         │
    >     │ -         // dispatched(true) wins. Because of this, validators that handle more                                                                                                         │
    >     │ -         // specific subtypes (e.g. SkaoDataResource) must be registered before                                                                                                         │
    >     │  … truncated (34 more lines) · ctrl+r to review                                                                                                                                          │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating DockerContainerValidatorImpl - both the outer and inner validate methods.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...utable/docker/DockerContainerValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractExecutable requested,                                                                                                                                        │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaDockerContainer.class)                                                                                                                         │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaDockerContainer) requested,                                                                                                                                       │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...utable/docker/DockerContainerValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaDockerContainer requested,                                                                                                                                           │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   result                                                                                                                                                                 │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating JupyterNotebookValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...table/jupyter/JupyterNotebookValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractExecutable requested,                                                                                                                                        │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaJupyterNotebook.class)                                                                                                                         │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaJupyterNotebook) requested,                                                                                                                                       │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...table/jupyter/JupyterNotebookValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaJupyterNotebook requested,                                                                                                                                           │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   result                                                                                                                                                                 │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating SimpleComputeResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleComputeResourceValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractComputeResource requested,                                                                                                                                   │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaSimpleComputeResource.class)                                                                                                                   │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaSimpleComputeResource) requested,                                                                                                                                 │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleComputeResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaSimpleComputeResource requested,                                                                                                                                     │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   result                                                                                                                                                                 │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating SimpleStorageResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleStorageResourceValidatorImpl.java +3 -4                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractStorageResource requested,                                                                                                                                   │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │               {                                                                                                                                                                          │
    >     │               case IvoaSimpleStorageResource simple:                                                                                                                                     │
    >     │ -                 validate(                                                                                                                                                              │
    >     │ +                 return validate(                                                                                                                                                       │
    >     │                       simple,                                                                                                                                                            │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleStorageResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaSimpleStorageResource requested,                                                                                                                                     │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   storageResult                                                                                                                                                          │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating SimpleDataResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...ata/simple/SimpleDataResourceValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractDataResource requested,                                                                                                                                      │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaSimpleDataResource.class)                                                                                                                      │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaSimpleDataResource) requested,                                                                                                                                    │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...ata/simple/SimpleDataResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │           }                                                                                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaSimpleDataResource requested,                                                                                                                                        │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   dataResult                                                                                                                                                             │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating IvoaDataResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/ivoa/IvoaDataResourceValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractDataResource requested,                                                                                                                                      │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaIvoaDataResource.class)                                                                                                                        │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaIvoaDataResource) requested,                                                                                                                                      │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/ivoa/IvoaDataResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │           }                                                                                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaIvoaDataResource requested,                                                                                                                                          │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   dataResult                                                                                                                                                             │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating SkaoDataResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/skao/SkaoDataResourceValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractDataResource requested,                                                                                                                                      │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaSkaoDataResource.class)                                                                                                                        │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaSkaoDataResource) requested,                                                                                                                                      │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/skao/SkaoDataResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │           }                                                                                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaSkaoDataResource requested,                                                                                                                                          │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   dataResult                                                                                                                                                             │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating AmazonS3DataResourceValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/amazon/AmazonS3DataResourceValidatorImpl.java +3 -2                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractDataResource requested,                                                                                                                                      │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │           if (requested.getClass() == IvoaS3DataResource.class)                                                                                                                          │
    >     │               {                                                                                                                                                                          │
    >     │ -             validate(                                                                                                                                                                  │
    >     │ +             return validate(                                                                                                                                                           │
    >     │                   (IvoaS3DataResource) requested,                                                                                                                                        │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/amazon/AmazonS3DataResourceValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaS3DataResource requested,                                                                                                                                            │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   dataResult                                                                                                                                                             │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating SimpleVolumeMountValidatorImpl.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...lume/simple/SimpleVolumeMountValidatorImpl.java +3 -4                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       @Override                                                                                                                                                                          │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaAbstractVolumeMount requested,                                                                                                                                       │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │               {                                                                                                                                                                          │
    >     │               case IvoaSimpleVolumeMount simple:                                                                                                                                         │
    >     │ -                 validate(                                                                                                                                                              │
    >     │ +                 return validate(                                                                                                                                                       │
    >     │                       simple,                                                                                                                                                            │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...lume/simple/SimpleVolumeMountValidatorImpl.java +3 -3                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │        *                                                                                                                                                                                 │
    >     │        */                                                                                                                                                                                │
    >     │ -     public void validate(                                                                                                                                                              │
    >     │ +     public ResultEnum validate(                                                                                                                                                        │
    >     │           final IvoaSimpleVolumeMount requested,                                                                                                                                         │
    >     │           final OfferSetRequestParserContext context                                                                                                                                     │
    >     │  ...                                                                                                                                                                                     │
    >     │                   volumeResult                                                                                                                                                           │
    >     │                   );                                                                                                                                                                     │
    >     │ -             context.dispatched(true);                                                                                                                                                  │
    >     │ +             return ResultEnum.ACCEPTED;                                                                                                                                                │
    >     │               }                                                                                                                                                                          │
    >     │  … truncated (8 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now removing the dispatched() methods from the OfferSetRequestParserContext interface and its implementation.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...odel/offerset/OfferSetRequestParserContext.java -14                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │                                                                                                                                                                                          │
    >     │       /**                                                                                                                                                                                │
    >     │ -      * Flag to indicate that the last validator call was dispatched.                                                                                                                   │
    >     │ -      * A dispatched validator is one that recognised the object type                                                                                                                   │
    >     │ -      * and either accepted or rejected the request.                                                                                                                                    │
    >     │ -      *                                                                                                                                                                                 │
    >     │ -      */                                                                                                                                                                                │
    >     │ -     public boolean dispatched();                                                                                                                                                       │
    >     │ -                                                                                                                                                                                        │
    >     │ -     /**                                                                                                                                                                                │
    >     │ -      * Set the dispatched flag.                                                                                                                                                        │
    >     │ -      *                                                                                                                                                                                 │
    >     │  … truncated (6 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../offerset/OfferSetRequestParserContextImpl.java -12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │           }                                                                                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     │ -     private boolean dispatched = false ;                                                                                                                                               │
    >     │ -     @Override                                                                                                                                                                          │
    >     │ -     public boolean dispatched()                                                                                                                                                        │
    >     │ -         {                                                                                                                                                                              │
    >     │ -         return this.dispatched;                                                                                                                                                        │
    >     │ -         }                                                                                                                                                                              │
    >     │ -     @Override                                                                                                                                                                          │
    >     │ -     public void dispatched(boolean value)                                                                                                                                              │
    >     │ -         {                                                                                                                                                                              │
    >     │ -         this.dispatched = value;                                                                                                                                                       │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now updating the comment in MockPlatformImpl that references dispatched(true).
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...s/functional/platfom/mock/MockPlatformImpl.java +4 -4                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │           // Register data resource validators with the most specific types first.                                                                                                       │
    >     │           // The validator factory iterates through validators in registration order                                                                                                     │
    >     │ -         // and stops at the first one that sets dispatched(true). Although each                                                                                                        │
    >     │ -         // validator now uses exact class matching (getClass() ==) rather than                                                                                                         │
    >     │ -         // instanceof, registering specific subtypes before their parent types                                                                                                         │
    >     │ -         // provides defence in depth against future regressions.                                                                                                                       │
    >     │ +         // and stops at the first one that returns ACCEPTED or FAILED. Although                                                                                                        │
    >     │ +         // each validator now uses exact class matching (getClass() ==) rather                                                                                                         │
    >     │ +         // than instanceof, registering specific subtypes before their parent                                                                                                          │
    >     │ +         // types provides defence in depth against future regressions.                                                                                                                 │
    >     │           //                                                                                                                                                                             │
    >     │           // SkaoDataResource extends IvoaDataResource in the type hierarchy,                                                                                                            │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ To-do Working on 1 to-do • 14 done
    >       ☒ Change Validator.validate() to return ResultEnum instead of void
    >       ☒ Update abstract validator interfaces (5 files) that re-declare validate()
    >       ☒ Update ValidatorFactoryImpl to return ResultEnum and use switch statement
    >       ☒ Update DockerContainerValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update JupyterNotebookValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleComputeResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleStorageResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update IvoaDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SkaoDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update AmazonS3DataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleVolumeMountValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Remove dispatched() from OfferSetRequestParserContext and its impl
    >       ☒ Update dispatched comment in MockPlatformImpl
    >       ☐ Compile and verify
    >   
    >     Now let me compile to verify everything works.
    >   
    >     $ /root/.m2/wrapper/dists/apache-maven-3.9.9/3477a4f1/bin/mvn compile -f /calycopis/java/pom.xml 2>&1 | tail -50 14s
    >       WARNING: A restricted method in java.lang.System has been called
    >       WARNING: java.lang.System::load has been called by org.fusesource.jansi.internal.JansiLoader in an unnamed module
    >       (file:/root/.m2/wrapper/dists/apache-maven-3.9.9/3477a4f1/lib/jansi-2.4.1.jar)
    >       … truncated (30 more lines) · ctrl+o to expand
    >   
    >     Build successful. Let me also verify there are no remaining references to dispatched that I might have missed.
    >   
    >     ⬢ Grepped "dispatched" in calycopis/java/src/main/java
    >       Found 0 matches
    >   
    >     ⬢ To-do All done
    >       ☒ Change Validator.validate() to return ResultEnum instead of void
    >       ☒ Update abstract validator interfaces (5 files) that re-declare validate()
    >       ☒ Update ValidatorFactoryImpl to return ResultEnum and use switch statement
    >       ☒ Update DockerContainerValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update JupyterNotebookValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleComputeResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleStorageResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update IvoaDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SkaoDataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update AmazonS3DataResourceValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Update SimpleVolumeMountValidatorImpl - return ResultEnum, remove dispatched calls
    >       ☒ Remove dispatched() from OfferSetRequestParserContext and its impl
    >       ☒ Update dispatched comment in MockPlatformImpl
    >       ☒ Compile and verify
    >   
    >     All changes compile successfully and there are no remaining references to dispatched in the codebase. Here's a summary of what was done:
    >     Interface changes:
    >     • Validator.validate() now returns ResultEnum instead of void
    >     • Updated all 5 abstract validator interfaces that re-declared validate() (AbstractExecutableValidator, AbstractDataResourceValidator, AbstractComputeResourceValidator,
    >       AbstractStorageResourceValidator, AbstractVolumeMountValidator)
    >   
    >     Restored switch statement in `ValidatorFactoryImpl`:
    >     • The validation loop now checks the returned ResultEnum with a switch: CONTINUE keeps iterating, ACCEPTED or FAILED exits the loop immediately
    >   
    >     Updated 9 validator implementations to return ResultEnum instead of calling context.dispatched(true):
    >     • DockerContainerValidatorImpl
    >     • JupyterNotebookValidatorImpl
    >     • SimpleComputeResourceValidatorImpl
    >     • SimpleStorageResourceValidatorImpl
    >     • SimpleDataResourceValidatorImpl
    >     • IvoaDataResourceValidatorImpl
    >     • SkaoDataResourceValidatorImpl
    >     • AmazonS3DataResourceValidatorImpl
    >     • SimpleVolumeMountValidatorImpl
    >   
    >     Each validator's outer validate() returns CONTINUE when the class doesn't match, and the inner validate() returns ACCEPTED on success or FAILED (with context.valid(false)) on failure.
    >     Removed the `dispatched` flag:
    >     • Removed dispatched() and dispatched(boolean) from OfferSetRequestParserContext
    >     • Removed the dispatched field and methods from OfferSetRequestParserContextImpl
    >     • Updated the comment in MockPlatformImpl to reference the new pattern
    >   

I have restarted the service at http://localhost:8082 to include the new changes.
Can you run the Python tests at /calycopis/tests/python/ to verify that they behave as expected.

    >     $ cd /calycopis/tests/python && python -m pytest test_mock_validators.py test_resource_registration.py -v 2>&1 9.6s
    >       ============================= test session starts ==============================
    >       platform linux -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python
    >       … truncated (56 more lines) · ctrl+o to expand
    >   
    >     All 49 tests pass -- 38 from test_mock_validators.py and 11 from test_resource_registration.py. The refactoring from void/dispatched flag to returning ResultEnum with the switch
    >     statement is working correctly.

# -----------------------------------------------------
# Ask about the rules.
#[cursor]

    In a previous session we created some rules for you to follow about adding information to the headers of files that had been modified.
    The rules are in the $HOME/.cursor directory.
    Is there a problem with the rules or where they are stored which prevented them from being picked up ?

    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 16s                                                                                                                                                                        │
    >     │ ... (14 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ The rules are in /root/.cursor/rules/ with .mdc extension and have alwaysApply: true in their frontmatter. The issue is about where they are stored.                                     │
    >     │                                                                                                                                                                                          │
    >     │ Cursor rules can be stored in several locations:                                                                                                                                         │
    >     │ 1. Project-level rules: .cursor/rules/ directory inside the project/workspace root                                                                                                       │
    >     │ 2. Global rules: ~/.cursor/rules/ directory                                                                                                                                              │
    >     │                                                                                                                                                                                          │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ Globbed 3 globs
    >       Globbed "**/*rules*" in root/.cursor
    >       Globbed "**/*rule*" in root/.cursor
    >       Globbed "**/*"" in root/.cursor
    >   
    >     $ ls -la /root/.cursor/ 2>&1 604ms
    >       total 216
    >       drwxr-xr-x. 1 root root    150 Feb 17 13:31 .
    >       … truncated (9 more lines) · ctrl+o to expand
    >   
    >     $ ls -la /root/.cursor/rules/ 2>&1 225ms
    >       total 12
    >       drwxr-xr-x. 1 root root  100 Feb 17 07:37 .
    >       … truncated (5 more lines) · ctrl+o to expand
    >   
    >     ⬢ Read 3 files
    >       Read root/.cursor/rules/ai-metrics.mdc
    >       Read root/.cursor/rules/copyright-year.mdc
    >       Read root/.cursor/rules/licence-header.mdc
    >   
    >     The rules are stored at /root/.cursor/rules/ (the user home ~/.cursor/rules/). Let me check if there's also a project-level rules directory.
    >   
    >     $ ls -la /.cursor/rules/ 2>&1; echo "---"; ls -la /calycopis/.cursor/rules/ 2>&1 exit 2 • 8.5s
    >       ls: cannot access '/.cursor/rules/': No such file or directory
    >       ---
    >       … truncated (2 more lines) · ctrl+o to expand
    >   
    >     That's the problem. Your workspace path is / (the filesystem root). Cursor looks for project-level rules at <workspace>/.cursor/rules/, which would be /.cursor/rules/. Your rules are
    >     at /root/.cursor/rules/ (the home directory), which is a different path.
    >     There are two types of Cursor rules locations:
    >     • Project rules: <workspace>/.cursor/rules/ -- in your case /.cursor/rules/
    >     • User/global rules: ~/.cursor/rules/ -- in your case /root/.cursor/rules/
    >   
    >     Since your workspace is / rather than /root, the project path /.cursor/rules/ doesn't exist, and the global rules at ~/.cursor/rules/ may not be getting picked up by the CLI agent.
    >     The simplest fix would be to either:
    >     1. Place the rules in the workspace's .cursor/rules/ directory (i.e. /.cursor/rules/)
    >     2. Or place them in the actual project directory at /calycopis/.cursor/rules/
    >   
    >     Option 2 is better practice since the rules are specific to the Calycopis project. Would you like me to copy them there?

  I thought that having the rules in my home directory would mean they would always apply for all projects.

    >     You're right, that's exactly how it's supposed to work. Rules in ~/.cursor/rules/ with alwaysApply: true should be picked up globally for all projects.
    >     The issue may be specific to how the CLI agent resolves the home directory in this environment, or it could be a bug in the CLI. I don't have visibility into exactly why the global
    >     rules weren't loaded for this session.
    >     To work around it, would you like me to copy the rules into the project at /calycopis/.cursor/rules/? That way they'll definitely be picked up when working on this project, while
    >     keeping the originals in your home directory for other projects too.


  There are more than just the rules in the /root/.cursor directory, it also stores the transctipts and history for the agent.

    >     Good point. The /root/.cursor directory is the standard location for all Cursor state -- rules, chat history, agent transcripts, config, etc. The workspace path being / shouldn't
    >     prevent ~/.cursor/rules/ from working as global rules.
    >     This might just be a bug or limitation in the current CLI agent version where global rules from ~/.cursor/rules/ aren't being loaded. It's worth reporting.
    >     In the meantime, shall I copy the three rule files into /calycopis/.cursor/rules/ as a workaround so they're picked up as project-level rules for this codebase?


  The agent is running in a docker container, and the /root/.cursor directory is mounted as a volume from the host filesystem. Could this be causing the problem ?

    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 13s                                                                                                                                                                        │
    >     │ ... (12 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ The user is asking whether running in a Docker container with /root/.cursor mounted as a volume could cause the rules not to be picked up.                                               │
    >     │                                                                                                                                                                                          │
    >     │ This is an interesting question. Let me think about this:                                                                                                                                │
    >     │                                                                                                                                                                                          │
    >     │ 1. The workspace path is / (the filesystem root)                                                                                                                                         │
    >     │ 2. /root/.cursor is mounted as a volume from the host filesystem                                                                                                                         │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     That's an interesting thought, but probably not the cause. We were able to read and list the files in /root/.cursor/rules/ without any issues during this session, so the volume mount
    >     is working correctly and the files are accessible.
    >     The more likely explanation is that the CLI agent simply doesn't look for global rules at ~/.cursor/rules/ -- it may only support project-level rules at <workspace>/.cursor/rules/.
    >     Global rules might be a feature of the Cursor IDE that hasn't been implemented in the CLI agent.
    >     Since your workspace is / and the project lives at /calycopis/, the pragmatic fix is to put a copy in the project. Shall I copy them to /calycopis/.cursor/rules/?


  I want the rules to apply to more than one project /calycopis and /trebula in this case.

    >     In that case, the simplest option is to copy the rules into both projects:
    >     • /calycopis/.cursor/rules/
    >     • /trebula/.cursor/rules/
    >   
    >     That duplicates the files, but guarantees they'll be picked up as project-level rules regardless of how the CLI agent resolves global rules.
    >     Shall I do that?

  Yes, but can you also update the .gitignore files to prevent the rules from being comitted to git.

    >     $ ls -la /calycopis/.gitignore /trebula/.gitignore 2>&1 exit 2 • 550ms
    >       ls: cannot access '/trebula/.gitignore': No such file or directory
    >       -rw-r--r--. 1 root root 0 Feb 17 08:43 /calycopis/.gitignore
    >       … truncated (1 more line) · ctrl+o to expand
    >   
    >     ⬢ Read calycopis/.gitignore
    >   
    >     $ ls -la /trebula/ 2>&1 | head -20 2.9s
    >       total 64
    >       drwxr-xr-x. 1 root root   268 Feb 12 17:14 .
    >       … truncated (17 more lines) · ctrl+o to expand
    >   
    >     Now let me copy the rules and update the .gitignore files.
    >   
    >   
    >     $ mkdir -p /trebula/.cursor/rules && cp /root/.cursor/rules/*.mdc /trebula/.cursor/rules/ 1m 4s
    >   
    >     $ mkdir -p /calycopis/.cursor/rules && cp /root/.cursor/rules/*.mdc /calycopis/.cursor/rules/ 3.5s
    >   
    >     Now updating the .gitignore files to ignore the .cursor directory.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ calycopis/.gitignore +1 -1                                                                                                                                                               │
    >     │                                                                                                                                                                                          │
    >     │ -                                                                                                                                                                                        │
    >     │ + .cursor/                                                                                                                                                                               │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ trebula/.gitignore +1 -1                                                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │ -                                                                                                                                                                                        │
    >     │ + .cursor/                                                                                                                                                                               │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Let me verify everything is in place.
    >   
    >     $ echo "=== calycopis ===" && ls /calycopis/.cursor/rules/ && echo && cat /calycopis/.gitignore && echo "=== trebula ===" && ls /trebula/.cursor/rules/ && echo && cat /trebula/.gitignore
    >       1.6s
    >       === calycopis ===
    >       ai-metrics.mdc
    >       … truncated (11 more lines) · ctrl+o to expand
    >   
    >     Done. Both projects now have:
    >     • The three rule files copied into .cursor/rules/
    >     • A .gitignore entry for .cursor/ to keep the entire directory out of git


    Can you apply the rules to update the headers for the files that were changed in the previous task to refactor the validate() method to return an enum.

    >   
    >   
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 41s                                                                                                                                                                        │
    >     │ ... (31 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ The user wants me to apply the rules from the .cursor/rules/ directory to update the headers of all files that were modified in the previous refactoring task. Let me recall which       │
    >     │ files were changed:                                                                                                                                                                      │
    >     │                                                                                                                                                                                          │
    >     │ 1. Validator.java                                                                                                                                                                        │
    >     │ 2. ValidatorFactoryImpl.java                                                                                                                                                             │
    >     │ 3. AbstractExecutableValidator.java                                                                                                                                                      │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Let me create a plan and work through the files systematically. I need to:
    >     1. Add/update AIMetrics blocks
    >     2. Update copyright years from 2025 to 2026
    >   
    >   
    >     ⬢ To-do Working on 3 to-dos
    >       ☐ Update headers for files WITHOUT existing AIMetrics (7 files)
    >       ☐ Update headers for files WITH existing AIMetrics (10 files)
    >       ☐ Update headers for files without licence headers (2 files)
    >   
    >     Starting with the 7 files that have licence headers but no AIMetrics block. These need a new AIMetrics block added and copyright year updated to 2026.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ … Thought for 4.8s                                                                                                                                                                       │
    >     │ ... (19 lines hidden below) · ctrl+o to expand                                                                                                                                           │
    >     │ Wait, AbstractValidatorImpl.java wasn't actually modified in this task. Let me revert that. Let me re-check which files were modified.                                                   │
    >     │                                                                                                                                                                                          │
    >     │ The files modified in the refactoring task were:                                                                                                                                         │
    >     │ 1. Validator.java                                                                                                                                                                        │
    >     │ 2. ValidatorFactoryImpl.java                                                                                                                                                             │
    >     │ 3. AbstractExecutableValidator.java                                                                                                                                                      │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/calycopis/functional/validator/Validator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...functional/validator/AbstractValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Wait, AbstractValidatorImpl.java wasn't modified in the refactoring. Let me revert that.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...functional/validator/AbstractValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now adding AIMetrics blocks to the files that don't have one. Starting with Validator.java.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/calycopis/functional/validator/Validator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now the 5 abstract validator interfaces. Let me read them to confirm their exact header format.
    >   
    >     ⬢ Read 6 files
    >       … 3 earlier items hidden
    >       Read ...l/storage/AbstractStorageResourceValidator.java
    >       Read ...amodel/volume/AbstractVolumeMountValidator.java
    >       Read ...lume/simple/SimpleVolumeMountValidatorImpl.java
    >   
    >     All 6 have the same header pattern. Let me update them all -- copyright year to 2026 and add AIMetrics block.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...del/executable/AbstractExecutableValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...del/executable/AbstractExecutableValidator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...tamodel/data/AbstractDataResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/compute/AbstractComputeResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...tamodel/data/AbstractDataResourceValidator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/storage/AbstractStorageResourceValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/compute/AbstractComputeResourceValidator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...amodel/volume/AbstractVolumeMountValidator.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...l/storage/AbstractStorageResourceValidator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...amodel/volume/AbstractVolumeMountValidator.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now SimpleVolumeMountValidatorImpl.java -- same pattern but also no AIMetrics.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...lume/simple/SimpleVolumeMountValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...lume/simple/SimpleVolumeMountValidatorImpl.java +12                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    * </meta:header>                                                                                                                                                                      │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 5,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (4 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ To-do Working on 2 to-dos • 1 done
    >       ☒ Update headers for files WITHOUT existing AIMetrics (7 files)
    >       ☐ Update headers for files WITH existing AIMetrics (10 files)
    >       ☐ Update headers for files without licence headers (2 files)
    >   
    >     Now the 10 files that already have AIMetrics blocks. I need to add a new entry to each array. Let me read their current AIMetrics blocks.
    >   
    >     ⬢ Read 10 files
    >       … 7 earlier items hidden
    >       Read ...el/data/skao/SkaoDataResourceValidatorImpl.java
    >       Read ...a/amazon/AmazonS3DataResourceValidatorImpl.java
    >       Read ...s/functional/platfom/mock/MockPlatformImpl.java
    >   
    >     Good. Now I can see the patterns. I have three groups:
    >     1. Single-entry AIMetrics (ValidatorFactoryImpl, DockerContainer, Jupyter, SimpleCompute, SimpleStorage) - need a new entry appended
    >     2. Two-entry AIMetrics (SimpleData, IvoaData, SkaoData, AmazonS3) - need a third entry appended
    >     3. Three-entry AIMetrics (MockPlatformImpl) - needs a fourth entry appended
    >   
    >     All with Copyright (C) 2025 need updating to 2026. Let me batch these updates.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../functional/validator/ValidatorFactoryImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 10,                                                                                                                                                                  │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now DockerContainerValidatorImpl -- copyright + AIMetrics entry.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...utable/docker/DockerContainerValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...utable/docker/DockerContainerValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     JupyterNotebookValidatorImpl and SimpleComputeResourceValidatorImpl -- both have the same single-entry pattern with value 3.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...table/jupyter/JupyterNotebookValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...table/jupyter/JupyterNotebookValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 3,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleComputeResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleComputeResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 3,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     SimpleStorageResourceValidatorImpl -- has a single entry with value 10, no timestamp (older format). Copyright 2025.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleStorageResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../simple/SimpleStorageResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 4,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now the four two-entry files. They all end with "value": 3 (or 2) as the last entry. I need to append after the closing } of the last entry.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...ata/simple/SimpleDataResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...ata/simple/SimpleDataResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 3,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/ivoa/IvoaDataResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/ivoa/IvoaDataResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 3,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/skao/SkaoDataResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/amazon/AmazonS3DataResourceValidatorImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...el/data/skao/SkaoDataResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 2,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...a/amazon/AmazonS3DataResourceValidatorImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 3,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Now MockPlatformImpl -- three existing entries, copyright 2025.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...s/functional/platfom/mock/MockPlatformImpl.java +1 -1                                                                                                                                 │
    >     │                                                                                                                                                                                          │
    >     │    * <meta:header>                                                                                                                                                                       │
    >     │    *   <meta:licence>                                                                                                                                                                    │
    >     │ -  *     Copyright (C) 2025 University of Manchester.                                                                                                                                    │
    >     │ +  *     Copyright (C) 2026 University of Manchester.                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │    *     This information is free software: you can redistribute it and/or modify                                                                                                        │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...s/functional/platfom/mock/MockPlatformImpl.java +10                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │    *       "units": "%"                                                                                                                                                                  │
    >     │    *       }                                                                                                                                                                             │
    >     │ +  *     },                                                                                                                                                                              │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (2 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ⬢ To-do Working on 1 to-do • 2 done
    >       ☒ Update headers for files WITHOUT existing AIMetrics (7 files)
    >       ☒ Update headers for files WITH existing AIMetrics (10 files)
    >       ☐ Update headers for files without licence headers (2 files)
    >   
    >     Now the last 2 files -- OfferSetRequestParserContext.java and OfferSetRequestParserContextImpl.java. These have no licence header or AIMetrics, just a bare /** */ comment.
    >   
    >     ⬢ Read 2 files
    >       Read ...odel/offerset/OfferSetRequestParserContext.java
    >       Read .../offerset/OfferSetRequestParserContextImpl.java
    >   
    >     These have no <meta:licence> block, so the copyright-year rule doesn't apply. I'll add an AIMetrics block inside the existing comment.
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ ...odel/offerset/OfferSetRequestParserContext.java +13                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │   /**                                                                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 2,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (5 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
    >     │ .../offerset/OfferSetRequestParserContextImpl.java +13                                                                                                                                   │
    >     │                                                                                                                                                                                          │
    >     │   /**                                                                                                                                                                                    │
    >     │    *                                                                                                                                                                                     │
    >     │ +  * AIMetrics: [                                                                                                                                                                        │
    >     │ +  *     {                                                                                                                                                                               │
    >     │ +  *     "timestamp": "2026-02-17T13:20:00",                                                                                                                                             │
    >     │ +  *     "name": "Cursor CLI",                                                                                                                                                           │
    >     │ +  *     "version": "2026.02.13-41ac335",                                                                                                                                                │
    >     │ +  *     "model": "Claude 4.6 Opus (Thinking)",                                                                                                                                          │
    >     │ +  *     "contribution": {                                                                                                                                                               │
    >     │ +  *       "value": 1,                                                                                                                                                                   │
    >     │ +  *       "units": "%"                                                                                                                                                                  │
    >     │ +  *       }                                                                                                                                                                             │
    >     │  … truncated (5 more lines) · ctrl+r to review                                                                                                                                           │
    >     └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
    >   
    >     Let me verify the project still compiles.
    >   
    >     $ /root/.m2/wrapper/dists/apache-maven-3.9.9/3477a4f1/bin/mvn compile -f /calycopis/java/pom.xml 2>&1 | tail -15 15s
    >       [INFO] --- resources:3.3.1:resources (default-resources) @ calycopis-broker ---
    >       [INFO] Copying 1 resource from src/main/resources to target/classes
    >       … truncated (14 more lines) · ctrl+o to expand
    >   
    >     ⬢ To-do All done
    >       ☒ Update headers for files WITHOUT existing AIMetrics (7 files)
    >       ☒ Update headers for files WITH existing AIMetrics (10 files)
    >       ☒ Update headers for files without licence headers (2 files)
    >   
    >     All done. Here's a summary of the header updates across the 19 modified files:
    >     Copyright year updated from 2025 to 2026 (16 files with <meta:licence> blocks):
    >     • Validator.java, DockerContainerValidatorImpl.java, JupyterNotebookValidatorImpl.java, SimpleComputeResourceValidatorImpl.java, SimpleStorageResourceValidatorImpl.java,
    >       SimpleDataResourceValidatorImpl.java, IvoaDataResourceValidatorImpl.java, SkaoDataResourceValidatorImpl.java, AmazonS3DataResourceValidatorImpl.java,
    >       SimpleVolumeMountValidatorImpl.java, AbstractExecutableValidator.java, AbstractDataResourceValidator.java, AbstractComputeResourceValidator.java,
    >       AbstractStorageResourceValidator.java, AbstractVolumeMountValidator.java, MockPlatformImpl.java
    >   
    >     New AIMetrics block added (9 files that had none):
    >     • Validator.java, AbstractExecutableValidator.java, AbstractDataResourceValidator.java, AbstractComputeResourceValidator.java, AbstractStorageResourceValidator.java,
    >       AbstractVolumeMountValidator.java, SimpleVolumeMountValidatorImpl.java, OfferSetRequestParserContext.java, OfferSetRequestParserContextImpl.java
    >   
    >     New AIMetrics entry appended (10 files with existing blocks):
    >     • ValidatorFactoryImpl.java, DockerContainerValidatorImpl.java, JupyterNotebookValidatorImpl.java, SimpleComputeResourceValidatorImpl.java, SimpleStorageResourceValidatorImpl.java,
    >       SimpleDataResourceValidatorImpl.java, IvoaDataResourceValidatorImpl.java, SkaoDataResourceValidatorImpl.java, AmazonS3DataResourceValidatorImpl.java, MockPlatformImpl.java
    >   



